{"version":3,"sources":["server/models/base.js"],"names":["BaseSchema","options","filterSchema","fSchema","schema","self","dbSchema","excludeDates","getDateColumns","excludeOwner","getOwnerColumns","roleBasedSchemas","Object","keys","forEach","field","processField","updateSchemaStore","setFieldDetails","fieldData","schemaObject","indexOf","fieldPathParts","split","projection","i","length","replace","Array","type","nestedField","fieldParts","title","str","toUpperCase","htmlOnly","html","dbOnly","db","config","fieldDBData","cloneObject","stringifiedFieldSchema","key","name","APP_CONFIG","appKey","ROLES","role","cacheKey","CONFIG_KEY_SEPERATOR","Code","collection","formKey","CONFIG_KEY_FORM_SUFFIX","gridKey","CONFIG_KEY_GRID_SUFFIX","dbKey","CONFIG_KEY_DB_SUFFIX","currentRoleHtmlOnlyAttrs","currentRoleDBOnlyAttrs","roles_config","fieldFormData","gridAttributes","fieldGridData","attr","fieldRoleDBData","attachHooks","attachMethods","method","attachStatics","statics","get","id","findById","execAsync","then","user","err","NOT_FOUND","reject","list","skip","limit","find","sort","createdAt","createdBy","String","Date","default","now","updatedAt","Schema","getSchema","model"],"mappings":"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","file":"server/models/base.js","sourceRoot":"../../.."}