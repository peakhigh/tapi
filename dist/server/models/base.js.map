{"version":3,"sources":["server/models/base.js"],"names":["BaseSchema","options","filterSchema","fSchema","schema","dbSchema","excludeDates","getDateColumns","excludeOwner","getOwnerColumns","roleBasedSchemas","Object","keys","forEach","field","title","replace","str","toUpperCase","htmlOnly","html","dbOnly","db","config","length","cloneObject","APP_CONFIG","appKey","ROLES","role","cacheKey","CONFIG_KEY_SEPERATOR","Code","collection","formKey","CONFIG_KEY_FORM_PREFIX","gridKey","CONFIG_KEY_GRID_PREFIX","dbKey","CONFIG_KEY_DB_PREFIX","currentRoleHtmlOnlyAttrs","currentRoleDBOnlyAttrs","roles_config","gridAttributes","attr","attachHooks","attachMethods","method","attachStatics","statics","get","id","findById","execAsync","then","user","err","NOT_FOUND","reject","list","skip","limit","find","sort","createdAt","owner","type","String","Date","default","now","updatedAt","Schema","getSchema","model"],"mappings":"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","file":"server/models/base.js","sourceRoot":"../../.."}